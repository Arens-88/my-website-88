# 亚马逊多平台数据整合报表工具

## 项目概述

**亚马逊多平台数据整合报表工具**是一款专业的亚马逊店铺运营数据管理软件，实现了"自动抓取数据→清洗整合→生成报表→定时推送"的完整闭环，有效替代手动Excel汇总，显著提升运营效率。

## 核心功能

### 1. 数据自动抓取
- **销售/订单数据**：自动从亚马逊SP-API获取ASIN、订单日期、订单量、销售额、平台费等信息
- **广告数据**：自动抓取广告花费、广告组等数据，支持多店铺多ASIN分析
- **库存数据**：实时监控在库量、在途量、30天销量等关键库存指标
- **成本数据管理**：支持ERP成本文件上传（Excel/CSV）和手动成本补充

### 2. 数据智能整合
- 按"ASIN + 日期"智能合并多源数据
- 自动化数据清洗（空值填充、异常值标记、日期统一）
- 智能计算衍生指标（净利润、利润率、客单价、库存周转率等）

### 3. 可视化报表中心
- **ASIN利润报表**：支持按日/周/月分组，可视化展示销售额、成本、利润等指标
- **销量趋势报表**：直观展示订单量和销售额变化趋势，自动标注异常波动
- **库存健康报表**：提供库存健康状况预警，覆盖天数智能提醒

### 4. 智能推送功能
- **企业微信推送**：每日早8点自动推送核心运营数据
- **邮件推送**：支持报表附件和自定义文案，多渠道触达
- **共享链接**：支持生成只读权限的报表共享链接

### 5. 系统安全保障
- **自动备份**：定期自动备份数据，防止数据丢失
- **失败重试**：API调用失败自动重试机制，确保数据完整性
- **权限管理**：用户认证和访问控制，保护数据安全

## 技术架构

- **前端**：HTML5 + CSS3 + JavaScript + Ant Design + ECharts
- **后端**：Python 3.7+ + Flask + SQLAlchemy + APScheduler
- **数据库**：SQLite（轻量级），支持扩展到MySQL/PostgreSQL
- **API集成**：亚马逊SP-API（OAuth2.0认证）

## 安装部署

### 环境要求
- Python 3.7 或更高版本
- Windows/Linux/MacOS 操作系统
- 稳定的网络连接（用于API调用）

### 快速安装

1. **运行启动脚本**
   ```bash
   python start.py
   ```
   
2. **首次启动会自动完成**
   - 安装必要的Python依赖
   - 创建项目目录结构
   - 初始化默认配置
   - 启动后端API服务
   - 自动打开浏览器访问前端界面

3. **访问系统**
   - 默认访问地址：http://127.0.0.1:5000
   - 默认登录账号：admin
   - 默认登录密码：password

## 配置说明

### 关键配置项

编辑 `config/config.env` 文件，配置以下关键参数：

- **亚马逊API配置**：在系统界面中进行配置，支持多店铺管理
- **邮件配置**：SMTP服务器、用户名、密码等
- **企业微信配置**：Webhook URL
- **同步设置**：默认每日凌晨2点自动同步
- **备份设置**：默认保留30天备份

## 使用指南

### 1. 系统初始化
- 登录系统后，首先在"系统配置"中设置亚马逊API凭证
- 添加店铺信息和认证信息

### 2. 数据同步
- **自动同步**：系统会在配置的时间自动执行同步任务
- **手动同步**：在"数据同步"页面点击"立即同步"按钮

### 3. 成本管理
- **文件上传**：在"成本管理"页面上传ERP成本文件
- **手动录入**：使用表单手动补充额外费用

### 4. 报表查看
- 在"报表中心"查看各类报表
- 支持自定义日期范围、筛选条件和导出功能

### 5. 推送设置
- 在"系统配置"中启用并配置推送功能
- 自定义推送内容和接收人

## 常见问题

### 1. API连接失败
- 检查API凭证是否正确
- 确认网络连接正常
- 查看日志文件获取详细错误信息

### 2. 数据同步不完整
- 可能是API调用次数限制，请稍后重试
- 检查店铺权限设置

### 3. 报表数据异常
- 检查成本数据是否完整
- 确认数据同步是否成功完成

## 故障排除

### 日志文件
- 系统日志：`logs/app.log`
- 同步日志：`logs/sync.log`
- 错误日志：`logs/error.log`

### 数据备份恢复
- 在"数据备份"页面可以管理备份和恢复操作
- 备份文件存储在 `data/backups/` 目录

## 更新日志

### v1.0.0
- 初始版本发布
- 实现亚马逊SP-API数据抓取
- 支持销售、广告、库存数据整合
- 提供三大核心报表
- 支持企业微信和邮件推送

## 技术支持

- 邮箱：support@amazon-report-tool.com
- 在线文档：https://docs.amazon-report-tool.com
- GitHub：https://github.com/amazon-report-tool

## 许可证

本项目采用MIT许可证。详见LICENSE文件。